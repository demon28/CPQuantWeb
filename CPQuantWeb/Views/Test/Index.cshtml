
@{
    ViewBag.Title = "Test";
}

@{
    ViewBag.Title = "CPQuant";
    ViewBag.Controller = "Home";
}
@section breadcrumb{
    <ul class="breadcrumb">
        <li>
            <i class="icon-home home-icon"></i>
            <a href="/Home">首页</a>
        </li>
        <li class="active">
            概览
        </li>
    </ul>
}
@section pageheader{
}
@section jquery_gritter_css{
}
@section customizeheader{
    <script src="~/asserts/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="~/asserts/js/jquery.ui.touch-punch.min.js"></script>
    <script src="~/asserts/js/jquery.slimscroll.min.js"></script>
    <script src="~/asserts/js/jquery.easy-pie-chart.min.js"></script>
    <script src="~/asserts/js/jquery.sparkline.min.js"></script>
    <script src="~/asserts/js/flot/jquery.flot.min.js"></script>
    <script src="~/asserts/js/flot/jquery.flot.pie.min.js"></script>
    <script src="~/asserts/js/flot/jquery.flot.resize.min.js"></script>
    <script src="~/Scripts/jquery.form.js"></script>
    <script src="~/Scripts/knockout-2.2.0.js"></script>


    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" href="../components/font-awesome/css/font-awesome.css" />

    <!-- page specific plugin styles -->
    <link rel="stylesheet" href="../components/_mod/jquery-ui/jquery-ui.css" />

    <!-- text fonts -->
    <link rel="stylesheet" href="../assets/css/ace-fonts.css" />

    <!-- ace styles -->
    <link rel="stylesheet" href="../assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="../assets/css/ace-part2.css" class="ace-main-stylesheet" />
    <![endif]-->
    <link rel="stylesheet" href="../assets/css/ace-skins.css" />
    <link rel="stylesheet" href="../assets/css/ace-rtl.css" />

    <!--[if lte IE 9]>
      <link rel="stylesheet" href="../assets/css/ace-ie.css" />
    <![endif]-->
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script src="../assets/js/ace-extra.js"></script>


    <script type="text/javascript">
        $(function () {
            $('.easy-pie-chart.percentage').each(function () {
                var $box = $(this).closest('.infobox');
                var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
                var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
                var size = parseInt($(this).data('size')) || 50;
                $(this).easyPieChart({
                    barColor: barColor,
                    trackColor: trackColor,
                    scaleColor: false,
                    lineCap: 'butt',
                    lineWidth: parseInt(size / 10),
                    animate: /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()) ? false : 1000,
                    size: size
                });
            })

            $('.sparkline').each(function () {
                var $box = $(this).closest('.infobox');
                var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
                $(this).sparkline('html', { tagValuesAttribute: 'data-values', type: 'bar', barColor: barColor, chartRangeMin: $(this).data('min') || 0 });
            });

            $(".infobox").click(function () {
                var href = $(this).attr("data-href");
                if (href) {
                    window.location.href = href;
                }
            });
        })</script>
    <style type="text/css">
        .infobox-link { cursor: pointer; }
            .infobox-link:hover { border: 1px solid #bbb; }
    </style>
}

<script src="~/js/System.js"></script>


<table id="simple-table" class="table  table-bordered table-hover">

    <tr>

        <td width="100px">
            <span id="span_lid"></span>
        </td>
        <td><a onclick="ToUpdate()"><span id="span_name"></span></a></td>

        <td>



            <script src="~/datepicker/dist/js/bootstrap-datepicker.js"></script>
            <script type="text/javascript" src="~/datepicker/dist/locales/bootstrap-datepicker.zh-CN.min.js" charset="UTF-8"></script>
            <div class="input-group date datepicker">
                <input type="text" class="form-control">
                <div class="input-group-addon">
                    <span class="glyphicon glyphicon-th "></span>
                </div>
            </div>


            -

            <div class="input-group date datepicker">
                <input type="text" class="form-control">
                <div class="input-group-addon">
                    <span class="glyphicon glyphicon-th "></span>
                </div>
            </div>

        </td>

        <td width="200px"><button class="btn btn-danger" id="btn_star">开 始</button></td>

    </tr>

</table>

<br />




<span id="scriptcode" style="display:none"></span>
<br />
<br />
<br />
<table id="dynamic-table" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th class="center"> ID</th>
            <th>期数</th>
            <th>开奖号码</th>
            <th>开奖时间</th>
            <th>中奖结果</th>
            <th>下注金额</th>
            <th>中奖金额</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: records">
        <tr>
            <td data-bind="text: cid">   </td>
            <td data-bind="text: expect">   </td>
            <td data-bind="text: opencode"> </td>
            <td data-bind="text: opendate"></td>
            <td data-bind="text: islottery"> </td>
            <td data-bind="text: setamount"> </td>
            <td data-bind="text: getamount"> </td>

        </tr>
    </tbody>
</table>


<script>
    $(document).ready(function () {

        Load();
        $("#dynamic-table").hide();

    });

    $("#btn_star").click(function () {

        $("#dynamic-table").show();


        var code = $("#scriptcode").html();
      
        $.globalEval(code);
        $.globalEval("main()");


    });

    function Load() {

        $.ajax({

            url: "/Test/Load",
            type: "POST",
            data: { lid: GetQueryString("lid") },
            success: function (result) {

                $("#span_lid").html(result.lid);
                $("#span_name").html(result.name);
                $("#scriptcode").html(result.content);
                

            }
        });

    }

    function ToUpdate() {

        window.location.href = "/Update/Index?lid=" + GetQueryString("lid");

    }


    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }



    $(function () {
        $('.datepicker').datepicker({
            language: 'zh-CN'
        });
    })
</script>
